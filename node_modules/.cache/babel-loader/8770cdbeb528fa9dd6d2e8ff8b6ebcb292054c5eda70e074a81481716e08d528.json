{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import axios from'axios';import{Link}from'react-router-dom';import{getPokemons,savePokemon}from'../indexedDB';import{SettingsContext}from'./Settings';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[pokemons,setPokemons]=useState([]);const{searchQuery,listSize,setSearchQuery}=useContext(SettingsContext);const[isLoading,setIsLoading]=useState(false);// Track loading state\nconst[error,setError]=useState(null);// Track any errors\nuseEffect(()=>{setIsLoading(true);// Set loading state on mount\ngetPokemons().then(data=>{if(data.length>0){setPokemons(data);}else{fetchAndCachePokemons();}}).finally(()=>setIsLoading(false));// Clear loading state after fetch\n},[]);const fetchAndCachePokemons=async()=>{try{const response=await axios.get('https://pokeapi.co/api/v2/pokemon?limit=150');const pokemonDetails=await Promise.all(response.data.results.map(async pokemon=>{const detailResponse=await axios.get(pokemon.url);console.log('Fetched Pokémon detail:',detailResponse.data);// Log the detailed response\nawait savePokemon(detailResponse.data);return detailResponse.data;}));setPokemons(pokemonDetails);}catch(error){console.error('Failed to fetch Pokémon:',error);setError(error);// Set error state\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search Pok\\xE9mon\",className:\"block w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-500 hover:underline\",onClick:()=>setSearchQuery(''),children:\"Clear\"})]}),isLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Loading Pok\\xE9mon...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-red-500\",children:[\"Error fetching Pok\\xE9mon: \",error.message]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:pokemons.filter(pokemon=>pokemon.name.toLowerCase().includes(searchQuery.toLowerCase())).slice(0,listSize).map(pokemon=>/*#__PURE__*/_jsxs(Link,{to:\"/pokemon/\".concat(pokemon.id),className:\"group bg-white shadow-md rounded p-4 hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"img\",{src:pokemon.sprites.front_default,alt:pokemon.name,className:\"w-16 h-16 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-center\",children:pokemon.name})]},pokemon.id))})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useContext","axios","Link","getPokemons","savePokemon","SettingsContext","jsx","_jsx","jsxs","_jsxs","Home","pokemons","setPokemons","searchQuery","listSize","setSearchQuery","isLoading","setIsLoading","error","setError","then","data","length","fetchAndCachePokemons","finally","response","get","pokemonDetails","Promise","all","results","map","pokemon","detailResponse","url","console","log","className","children","type","placeholder","value","onChange","e","target","onClick","message","filter","name","toLowerCase","includes","slice","to","concat","id","src","sprites","front_default","alt"],"sources":["C:/Users/Dev/Desktop/Pokedex/src/components/Home.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { getPokemons, savePokemon } from '../indexedDB';\r\nimport { SettingsContext } from './Settings';\r\n\r\nfunction Home() {\r\n  const [pokemons, setPokemons] = useState([]);\r\n  const { searchQuery, listSize, setSearchQuery } = useContext(SettingsContext);\r\n  const [isLoading, setIsLoading] = useState(false); // Track loading state\r\n  const [error, setError] = useState(null); // Track any errors\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true); // Set loading state on mount\r\n    getPokemons().then(data => {\r\n      if (data.length > 0) {\r\n        setPokemons(data);\r\n      } else {\r\n        fetchAndCachePokemons();\r\n      }\r\n    }).finally(() => setIsLoading(false)); // Clear loading state after fetch\r\n  }, []);\r\n\r\n  const fetchAndCachePokemons = async () => {\r\n    try {\r\n      const response = await axios.get('https://pokeapi.co/api/v2/pokemon?limit=150');\r\n      const pokemonDetails = await Promise.all(response.data.results.map(async pokemon => {\r\n        const detailResponse = await axios.get(pokemon.url);\r\n        console.log('Fetched Pokémon detail:', detailResponse.data); // Log the detailed response\r\n        await savePokemon(detailResponse.data);\r\n        return detailResponse.data;\r\n      }));\r\n      setPokemons(pokemonDetails);\r\n    } catch (error) {\r\n      console.error('Failed to fetch Pokémon:', error);\r\n      setError(error); // Set error state\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search Pokémon\"\r\n          className=\"block w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          value={searchQuery}\r\n          onChange={e => setSearchQuery(e.target.value)}\r\n        />\r\n        <button className=\"text-blue-500 hover:underline\" onClick={() => setSearchQuery('')}>Clear</button>\r\n      </div>\r\n\r\n      {isLoading && <p className=\"text-center\">Loading Pokémon...</p>}\r\n      {error && <p className=\"text-center text-red-500\">Error fetching Pokémon: {error.message}</p>}\r\n\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        {pokemons.filter(pokemon => pokemon.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n          .slice(0, listSize)\r\n          .map(pokemon => (\r\n            <Link key={pokemon.id} to={`/pokemon/${pokemon.id}`} className=\"group bg-white shadow-md rounded p-4 hover:bg-gray-100\">\r\n              <img src={pokemon.sprites.front_default} alt={pokemon.name} className=\"w-16 h-16 mx-auto mb-2\" />\r\n              <h3 className=\"text-xl font-bold text-center\">{pokemon.name}</h3>\r\n              {/* Add more info like types, stats, etc. */}\r\n            </Link>\r\n          ))}\r\n      </div>\r\n\r\n      {/* Add pagination buttons if needed */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}